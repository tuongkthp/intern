# 1. Cấu hình cơ bản
- Glance có một số tùy chọn mà bạn có thể sử dụng để cấu hình Glance API server, Glance Registry server và nhiều storage backens lưu trữ image cho Glance

- File cấu hình Glance API server là glance-api.conf. File cấu hình của Glance Registry server là glancy-registry.conf

- glance-manage tải cấu hình từ 3 file sau:

    + glance-registry.conf

    + glance-api.conf

    + glance-manage.conf

2. File glance-api.conf
Nằm tại thư mục /etc/glance/glance-api.conf

Tại section [database], cấu hình để kết nối tới database:
```sh
[database]
# ...
connection = mysql+pymysql://glance:Tuong123@controller/glance
```

- Trong đó :

    - mysql+pymysql: backend được sử dụng

    - glance : user sử dụng két nối.

    - Tuong123: password của user glance sử dụng để đăng nhập database.

    - controller: tên host hoặc có thể để  ip host 

Section [keystone_authtoken] và [paste_deploy] chứa các cấu hình để kết nối tới identity service:

```sh
[keystone_authtoken]
www_authenticate_uri  = http://controller:5000
auth_url = http://controller:5000
memcached_servers = controller:11211
auth_type = password
project_domain_name = Default
user_domain_name = Default
project_name = service
username = glance
password = Glance3104

[paste_deploy]
# ...
flavor = keystone
```

Section [glance_store] chứa cấu hình về kiểu lưu trữ image cũng như nơi chứa image file

```sh
[glance_store]
default_backend = fs
```

- Ở đây có 1 loại stores được sử dụng và mặc định sẽ sử dụng file system. Bạn có thể cấu hình để lưu trữ trên nhiều nơi khác nhau theo cấu trúc:

```sh
filesystem_store_datadirs=PATH:PRIORITY
```

- Trong đó:
```sh
`PATH` là đường dẫn tới thư mục chứa image và PRIORITY là mức độ ưu tiên.
```

# 3. File Glance-registry.conf
Nằm tại thư mục /etc/glance/glance-registry.conf
```sh
[database]
# ...
connection = mysql+pymysql://glance:GLANCE_DBPASS@controller/glance

[keystone_authtoken]
# ...
auth_uri = http://controller:5000
auth_url = http://controller:35357
memcached_servers = controller:11211
auth_type = password
project_domain_name = default
user_domain_name = default
project_name = service
username = glance
password = GLANCE_PASS

[paste_deploy]
# ...
flavor = keystone
```

# 4. File log của Glance
Section [DEFAULT] chứa đường dẫn tới file và thư mục log của Glance:

```sh
[DEFAULT]
log_file = /var/log/glance/api.log
log_dir = /var/log/glance
```

- File glance-api.log ghi lại lịch sử truy cập api server

- File glance-registry.log ghi lại lịch sử liên quan tới registry server.

- Đây là hai đường dẫn mặc định để ghi lại log của Glance, bạn có thể thay đổi file lưu lại log bằng cách chỉnh sửa file cấu hình, sau đó khởi động lại glance-api cùng file config bằng câu lệnh:

```sh
    glance-control api start glance-api.conf
```













